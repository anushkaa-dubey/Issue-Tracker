<div class="container">
  <div class="header">
    <h1>Issue Tracker</h1>
    <button (click)="onCreateIssue()" class="create-btn">
      Create Issue
    </button>
  </div>

  <div class="filters">
    <div class="filter-group">
      <input type="text" placeholder="Search issues..." 
             (keyup.enter)="onSearchChange($event)" class="search-input">
    </div>

    <div class="filter-group">
      <label>Status:</label>
      <select (change)="onFilterChange()" [(ngModel)]="filters.status">
        <option value="">All</option>
        <option *ngFor="let status of statusOptions" [value]="status">
          {{ status }}
        </option>
      </select>
    </div>

    <div class="filter-group">
      <label>Priority:</label>
      <select (change)="onFilterChange()" [(ngModel)]="filters.priority">
        <option value="">All</option>
        <option *ngFor="let priority of priorityOptions" [value]="priority">
          {{ priority }}
        </option>
      </select>
    </div>

    <div class="filter-group">
      <input type="text" placeholder="Assignee" 
             (keyup.enter)="onFilterChange()" [(ngModel)]="filters.assignee">
    </div>
  </div>

  <div class="table-container">
    <table class="issues-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Status</th>
          <th>Priority</th>
          <th>Assignee</th>
          <th>Last Updated</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let issue of issues" (click)="onIssueSelected(issue)" class="issue-row">
          <td>{{ issue.id }}</td>
          <td>{{ issue.title }}</td>
          <td>
            <span [class]="'status-badge ' + issue.status">
              {{ issue.status }}
            </span>
          </td>
          <td>
            <span [class]="'priority-badge ' + issue.priority">
              {{ issue.priority }}
            </span>
          </td>
          <td>{{ issue.assignee || 'Unassigned' }}</td>
          <td>{{ issue.updated_at | date:'medium' }}</td>
          <td>
            <button (click)="onEditIssue(issue); $event.stopPropagation()" class="edit-btn">
              Edit
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="pagination">
      <button (click)="onPageChange(filters.page - 1)" [disabled]="filters.page === 1">
        Previous
      </button>
      <span>Page {{ filters.page }}</span>
      <button (click)="onPageChange(filters.page + 1)">
        Next
      </button>
    </div>
  </div>

  <!-- Issue Form Modal -->
  <div *ngIf="showForm" class="modal-overlay">
    <div class="modal-content">
      <app-issue-form [issue]="editingIssue" (closed)="onFormClosed()"></app-issue-form>
    </div>
  </div>

  <!-- Issue Detail Modal -->
  <div *ngIf="selectedIssue" class="modal-overlay">
    <div class="modal-content">
      <app-issue-detail [issue]="selectedIssue" (closed)="onDetailClosed()"></app-issue-detail>
    </div>
  </div>
</div>